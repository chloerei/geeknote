<%= form_with model: @user, url: settings_notification_path(token: params[:token]), builder: CustomFormBuilder, class: 'form', id: 'settings-notification-form', data: { controller: 'form' } do |form| %>
  <div data-controller="fieldset-manager">
    <div class="margin-bottom-3">
      <label class="display-flex gap-3 align-items-center">
        <div class="flex-grow-1">
          <%= User.human_attribute_name(:email_notification_enabled) %>
        </div>
        <%= form.switch :email_notification_enabled, data: { action: 'form#submit fieldset-manager#toggle', "fieldset-manager-target": "switch" } %>
      </label>
    </div>
    <fieldset class="fieldset" data-fieldset-manager-target="fieldset">
      <label class="display-flex gap-3 align-items-center">
        <div class="flex-grow-1">
          <%= User.human_attribute_name(:comment_email_notification_enabled) %>
        </div>
        <%= form.check_box :comment_email_notification_enabled, data: { action: 'form#submit' } %>
      </label>
    </fieldset>
  </div>
<% end %>
