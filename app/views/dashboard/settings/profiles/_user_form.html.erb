<%= form_with model: user, url: dashboard_settings_profile_path do |form| %>
  <div class="form-field">
    <%= form.label :banner_image, class: "form-label" %>
    <%= render "components/image_field", form: form, name: :banner_image %>
  </div>

  <div class="form-field">
    <%= form.label :avatar, class: "form-label" %>
    <%= render "components/avatar_field", form: form, name: :avatar do %>
      <div class="relative w-32 h-32">
        <div class="absolute inset-0 [&>img]:object-cover [&>img]:h-full [&>img]:w-full [&>img]:rounded-full" data-image-field-target="preview">
          <% if user.avatar.attached? %>
            <%= image_tag user.avatar.variant(:thumb) %>
          <% end %>
        </div>

        <label for="user_avatar" class="absolute inset-0 flex flex-col items-center justify-center gap-2 group-[.attached]/image-field:hidden rounded-full border-2 border-dashed border-outline-variant interactive-bg-surface text-on-surface-variant cursor-pointer">
          <div class="icon w-6 h-6">
            <x-icon>add_photo_alternate</x-icon>
          </div>
        </label>

        <div class="absolute top-2 right-2 items-center gap-2 hidden group-[.attached]/image-field:flex">
          <div class="bg-surface-variant rounded-full">
            <label for="user_avatar" class="icon-button">
              <x-icon>add_photo_alternate</x-icon>
            </label>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <div class="form-field">
    <%= form.label :name, class: "form-label" %>
    <%= render "components/text_field", form: form, name: :name %>
  </div>

  <%= form.fields_for :account do |account_form| %>
    <div class="form-field">
      <%= account_form.label :name, class: "form-label" %>
      <%= render "components/text_field", form: account_form, name: :name, prefix: "@" %>
    </div>
  <% end %>

  <div class="form-field">
    <%= form.label :bio, class: "form-label" %>
    <%= render "components/text_field", form: form, name: :bio, type: :text_area, options: { rows: 3 } %>
  </div>

  <div class="form-field">
    <button type="submit" class="button button--filled">
      Save changes
    </button>
  </div>
<% end %>
