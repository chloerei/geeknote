<div class="card card-border border-base-300 bg-base-100">
  <div class="card-body">
    <div class="flex items-center gap-2 pb-4 border-b border-base-300">
      <div class="flex-grow">
        <h2 class="card-title">
          <%= t "general.members" %>
        </h2>
      </div>

      <a href="<%= new_dashboard_settings_member_path(@account.name) %>" class="btn btn-primary">
        Add member
      </a>
    </div>


    <ul class="list">
      <% @account.owner.members.active.order(id: :asc).includes(:user).each do |member| %>
        <li class="list-row items-center">
          <div class="avatar">
            <div class="size-10 rounded-full">
              <img src="<%= avatar_url(member.user) %>">
            </div>
          </div>
          <div class="">
            <div class="font-medium">
              <%= member.user.name %>
            </div>
            <div class="text-on-surface-variant">
              <%= member.user.email %>
            </div>
          </div>
          <div class="">
            <span class="font-medium">
              <%= member.role %>
            </span>
          </div>
          <div class="dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost btn-circle">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ellipsis-vertical-icon lucide-ellipsis-vertical"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>
            </label>
            <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
              <li>
                <a href="<%= edit_dashboard_settings_member_path(@account.name, member) %>">
                  <%= t "general.edit" %>
                </a>
              </li>
              <li>
                <a href="<%= dashboard_settings_member_path(@account.name, member) %>" data-turbo-method="delete" data-turbo-confirm="Delete this member?">
                  <%= t "general.delete" %>
                </a>
              </li>
            </ul>
          </div>
        </li>
      <% end %>
    </ul>

    <% if @account.owner.members.pending.any? %>
      <div class="mt-6">
        <div class="text-sm font-medium">
          <%= t "general.invitations" %>
        </div>

        <ul class="list mt-4">
          <% @account.owner.members.pending.order(id: :asc).includes(:user).each do |member| %>
            <li class="list-row items-center">
              <div class="avatar">
                <div class="size-10 rounded-full">
                  <img src="<%= asset_path("avatar.png") %>">
                </div>
              </div>
              <div>
                <div class="text-on-surface-variant">
                  <%= member.invitation_email %>
                </div>
              </div>
              <div>
                <span class="font-medium">
                  <%= member.role %>
                </span>
              </div>
              <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-circle">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ellipsis-vertical-icon lucide-ellipsis-vertical"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>
                </label>
                <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
                  <li>
                    <a href="<%= edit_dashboard_settings_member_path(@account.name, member) %>">
                      <%= t "general.edit" %>
                    </a>
                  </li>
                  <li>
                    <a href="<%= dashboard_settings_member_path(@account.name, member) %>" data-turbo-method="delete" data-turbo-confirm="Delete this member?">
                      <%= t "general.delete" %>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>
</div>
