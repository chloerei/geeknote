<div class="container">
  <div class="layout">
    <div class="navbar">
      <div class="card card--filled padding-2">
        <div class="display-flex padding-2 margin-bottom-3 gap-2 align-items-center">
          <div class="avatar">
            <%= avatar_image_tag @account.owner.avatar %>
          </div>
          <div class="title-large flex-grow-1">
            <%= @account.owner.name %>
          </div>
        </div>

        <div class="nav">
          <a href="" class="nav__item nav__item--active">
            <div class="nav__item__icon">
              <span class="material-icons">article</span>
            </div>
            <div class="nav__item__label">
              Posts
            </div>
          </a>
          <a href="" class="nav__item">
            <div class="nav__item__icon">
              <span class="material-icons">library_books</span>
            </div>
            <div class="nav__item__label">
              Collections
            </div>
          </a>
          <a href="" class="nav__item">
            <div class="nav__item__icon">
              <span class="material-icons">settings</span>
            </div>
            <div class="nav__item__label">
              Settings
            </div>
          </a>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="card card--filled padding-3">
        <div class="display-flex gap-2 align-items-center margin-bottom-3">
          <div class="flex-grow-1 headline-medium">
            <%= t 'common.posts' %>
          </div>

          <div class="dropdown" data-controller="dropdown">
            <button type="button" class="button button--text" data-action="dropdown#toggle">
              <div class="button__label">
                <% if Post.statuses.include?(params[:status]) %>
                  <%= Post.human_attribute_name("status.#{params[:status]}") %>
                <% else %>
                  <%= t 'common.status' %>
                <% end %>
              </div>
              <div class="button__icon">
                <span class="material-icons">expand_more</span>
              </div>
            </button>
            <div class="dropdown__container dropdown__container--top-right">
              <a href="<%= url_for(post_filter_params.merge(status: nil)) %>" class="dropdown__item"><%= t "common.all" %></a>
              <% Post.statuses.keys.each do |status| %>
                <a href="<%= url_for(post_filter_params.merge(status: status)) %>" class="dropdown__item"><%= Post.human_attribute_name("status.#{status}") %></a>
              <% end %>
            </div>
          </div>

          <div class="dropdown" data-controller="dropdown">
            <button type="button" class="button button--text" data-action="dropdown#toggle">
              <div class="button__label">
                <% if params[:tag] %>
                  <%= params[:tag] %>
                <% else %>
                  <%= t 'common.tags' %>
                <% end %>
              </div>
              <div class="button__icon">
                <span class="material-icons">expand_more</span>
              </div>
            </button>
            <div class="dropdown__container dropdown__container--top-right">
              <a href="<%= url_for(post_filter_params.merge(tag: nil)) %>" class="dropdown__item">All</a>
              <% @account.post_tags.each do |tag| %>
                <a href="<%= url_for(post_filter_params.merge(tag: tag.name)) %>" class="dropdown__item"><%= tag.name %></a>
              <% end %>
            </div>
          </div>

          <a href="<%= new_account_dashboard_post_path(@account) %>" class="button button--outlined">
            <div class="button__icon">
              <span class="material-icons">post_add</span>
            </div>
            <div class="button__text">
              <%= t 'common.new_post' %>
            </div>
          </a>
        </div>

        <div class="margin-bottom-3">
          <%= render partial: 'post', collection: @posts %>
        </div>

        <%= paginate @posts %>
      </div>
    </div>
  </div>
</div>
