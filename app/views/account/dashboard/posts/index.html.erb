<div class="container">
  <div class="padding">
    <div class="breadcrumb">
      <div class="breadcrumb__item">
        <a href="<%= account_root_path(@account) %>">
          <%= @account.display_name %>
        </a>
      </div>
      <div class="breadcrumb__item">
        <a href="<%= account_dashboard_root_path(@account) %>">
          <%= t 'common.dashboard' %>
        </a>
      </div>
      <div class="breadcrumb__item breadcrumb__item--active">
        <%= t 'common.posts' %>
      </div>
    </div>
  </div>

  <div class="toolbar">
    <div class="toolbar__title headline-4">
      <%= t 'common.posts' %>
    </div>
    <div class="toolbar__action dropdown" data-controller="dropdown">
      <button type="button" class="button button--text" data-action="dropdown#toggle">
        <div class="button__label">
          <% if Post.statuses.include?(params[:status]) %>
            <%= Post.human_attribute_name("status.#{params[:status]}") %>
          <% else %>
            <%= t 'common.status' %>
          <% end %>
        </div>
        <div class="button__icon">
          <span class="material-icons">expand_more</span>
        </div>
      </button>
      <div class="dropdown__menu dropdown__menu--top-right">
        <a href="<%= url_for(post_filter_params.merge(status: nil)) %>" class="dropdown__item"><%= t "common.all" %></a>
        <% Post.statuses.keys.each do |status| %>
          <a href="<%= url_for(post_filter_params.merge(status: status)) %>" class="dropdown__item"><%= Post.human_attribute_name("status.#{status}") %></a>
        <% end %>
      </div>
    </div>
    <div class="toolbar__action dropdown" data-controller="dropdown">
      <button type="button" class="button button--text" data-action="dropdown#toggle">
        <div class="button__label">
          <% if params[:tag] %>
            <%= params[:tag] %>
          <% else %>
            <%= t 'common.tags' %>
          <% end %>
        </div>
        <div class="button__icon">
          <span class="material-icons">expand_more</span>
        </div>
      </button>
      <div class="dropdown__menu dropdown__menu--top-right">
        <a href="<%= url_for(post_filter_params.merge(tag: nil)) %>" class="dropdown__item">All</a>
        <% @account.post_tags.each do |tag| %>
          <a href="<%= url_for(post_filter_params.merge(tag: tag.name)) %>" class="dropdown__item"><%= tag.name %></a>
        <% end %>
      </div>
    </div>
    <div class="toolbar__action">
      <a href="<%= new_account_dashboard_post_path(@account) %>" class="button button--contained button--primary button--last">
        <div class="button__icon">
          <span class="material-icons">post_add</span>
        </div>
        <div class="button__text">
          <%= t 'common.new_post' %>
        </div>
      </a>
    </div>
  </div>

  <table class="table table--flex border-bottom">
    <thead>
      <tr>
        <th class="table__cell--title"><%= t 'common.title' %></th>
        <th class="table__cell--attribute"><%= t 'common.status' %></th>
      </tr>
    </thead>
    <tbody>
      <%= render partial: 'post', collection: @posts %>
    </tbody>
  </table>

  <div class="padding">
    <%= paginate @posts %>
  </div>
</div>
