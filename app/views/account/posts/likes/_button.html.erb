<%
  liked = Current.user.present? && post.liked_by?(Current.user)
%>

<div id="<%= dom_id(post, :like) %>" class="inline-flex items-center group <%= 'liked' if liked %>">
  <div class="group-[.liked]:hidden">
    <%= form_with url: account_post_like_path(post.account.name, post), method: :post do %>
      <button type="submit" class="icon-button hover:text-red-500">
        <x-icon>favorite</x-icon>
      </button>
    <% end %>
  </div>
  <div class="hidden group-[.liked]:block">
    <%= form_with url: account_post_like_path(post.account.name, post), method: :delete do %>
      <button type="submit" class="icon-button text-red-500">
        <x-icon fill>favorite</x-icon>
      </button>
    <% end %>
  </div>
  <% if @post.likes_count > 0 %>
    <span class="text-on-surface-variant tabular-nums px-1">
      <%= post.likes_count %>
    </span>
  <% end %>
</div>
