<div class="card card--surface post-card position-relative padding-3">
  <h3 class="title-medium margin-top-0 margin-bottom-3">
    <a href="<%= account_post_path(post.account, post) %>" class="link-expended link-title" data-post-list-target="postLink">
      <%= post.title.presence || t('common.untitled') %>
    </a>
  </h3>

  <div class="display-flex gap-3 margin-bottom-3">
    <div class="flex-grow-1 text-break-word overflow-hidden">

      <div class="display-flex flex-wrap gap-2 align-items-center margin-bottom-2">
        <div class="avatar avatar--small">
          <%= avatar_image_tag post.account.owner.avatar %>
        </div>
        <div class="title-small">
          <%= post.account.display_name %>
          <% if post.account.organization? %>
            / <%= post.user.name %>
          <% end %>
        </div>
        <div class="body-medium text-muted">
          <%= format_time post.published_at %>
        </div>
      </div>

      <div class="body-medium text-muted">
        <%= post_summary post %>
      </div>

    </div>

    <% if post.featured_image.attached? %>
      <div class="flex-shrink-0 display-none display-block@tablet">
        <div class="post-card__feature-image">
          <%= featured_image_thumb_tag post.featured_image %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="display-flex flex-wrap gap-3">
    <% if post.tags.any? %>
      <div class="display-flex flex-wrap gap-2">
        <% post.tags.each do |tag| %>
          <a href="<%= tag_path(id: tag.name) %>" class="chip">
            <%= tag.name %>
          </a>
        <% end %>
      </div>
    <% end %>

    <div class="display-flex align-items-center gap-1">
      <span class="material-icons material-icons--inline">favorite</span>
      <span><%= post.likes_count %></span>
    </div>
    <div class="display-flex align-items-center gap-1">
      <span class="material-icons material-icons--inline">comment</span>
      <span><%= post.comments_count %></span>
    </div>
  </div>
</div>
