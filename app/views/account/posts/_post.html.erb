<section id="<%= dom_id(post) %>" class="card card-side card-border border-base-300 bg-base-100 relative">
  <div class="card-body">
    <div class="flex gap-2 items-center">
      <div class="flex-none">
        <div class="avatar">
          <div class="size-6 rounded-full">
            <img src="<%= avatar_url(post.user) %>" alt="avatar">
          </div>
        </div>
      </div>
      <div class="flex-grow">
        <span class="font-medium">
          <%= post.user.name %>
        </span>

        <% if post.account != post.user.account %>
          <span class="text-base-content/80">
            <%= t "general.in" %>
          </span>
          <span>
            <%= post.account.owner.name %>
          </span>
        <% end %>
      </div>
    </div>

    <div class="line-clamp-3">
      <h3 class="text-xl font-medium">
        <a href="<%= account_post_path(post.account.name, post) %>" class="after:absolute after:inset-0">
          <%= post.title.presence || t("general.untitled") %>
        </a>
      </h3>

      <div class="text-base-content/80 mt-2">
        <%= markdown_summary post.content %>
      </div>
    </div>

    <div class="text-base-content/80">
      <span>
        <%= format_time post.published_at %>
      </span>
      &centerdot;
      <span>
        <%= post.likes_count %>
        <%= t("general.likes") %>
      </span>
      &centerdot;
      <span>
        <%= post.comments_count %>
        <%= t("general.comments") %>
      </span>
    </div>
  </div>

  <% if post.featured_image.attached? %>
    <figure class="flex-none w-40">
      <img src="<%= polymorphic_url(post.featured_image.variant(:large)) %>" alt="Featured image" class="object-cover">
    </figure>
  <% end %>
</section>
