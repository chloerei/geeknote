<%
  liked = Current.user.present? && post.bookmarks.where(user: Current.user).exists?
%>

<div id="<%= dom_id(post, :bookmark) %>" class="inline-flex items-center group <%= 'liked' if liked %>">
  <div class="group-[.liked]:hidden">
    <%= form_with url: account_post_bookmark_path(post.account.name, post), method: :post do %>
      <button type="submit" class="icon-button hover:text-primary hover:bg-primary/10 active:bg-primary/20">
        <%= material_icon "bookmark" %>
      </button>
    <% end %>
  </div>
  <div class="hidden group-[.liked]:block">
    <%= form_with url: account_post_bookmark_path(post.account.name, post), method: :delete do %>
      <button type="submit" class="icon-button text-primary hover:text-primary hover:bg-primary/10 active:bg-primary/20">
        <%= material_icon "bookmark-fill" %>
      </button>
    <% end %>
  </div>
  <% if @post.bookmarks_count > 0 %>
    <span class="text-on-surface-variant tabular-nums px-1">
      <%= post.bookmarks_count %>
    </span>
  <% end %>
</div>
