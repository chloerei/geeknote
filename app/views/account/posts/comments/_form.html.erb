<div class="card card--outlined padding-3" id="comment-form">
  <div class="display-flex gap-3">
    <div class="flex-shrink-0 display-none display-block@tablet">
      <div class="avatar">
        <%= avatar_image_tag current_user.avatar %>
      </div>
    </div>
    <div class="flex-grow-1 min-width-0">
      <div class="padding-y padding-right">
        <%= form_with model: comment, url: [@account, @post, comment], builder: CustomFormBuilder, class: 'form' do |form| %>
          <%= form.hidden_field :parent_id %>
          <div class="margin-bottom-3">
            <%= form.hidden_field :content, id: 'comment-content', placeholder: t('.content_placeholder') %>
            <div class="markdown-editor" data-controller="markdown-editor" data-markdown-editor-input-value="comment-content" data-markdown-editor-direct-upload-url-value="<%= rails_direct_uploads_path %>" data-markdown-editor-i18n-value="<%= { write: I18n.t('markdown_editor.write'), preview: I18n.t('markdown_editor.preview') }.to_json %>">
            </div>
          </div>
          <% if comment.new_record? %>
            <button type="submit" class="button button--filled">
              <%= t 'common.submit' %>
            </button>
          <% else %>
            <button type="submit" class="button button--filled">
              <%= t 'common.save_changes' %>
            </button>
            <a href="<%= account_post_comment_path(@account, @post, comment) %>" class="button button--text">
              <%= t 'common.cancel' %>
            </a>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
